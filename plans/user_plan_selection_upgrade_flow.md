# User Plan Selection & Upgrade Flow (Execution Plan)

## ุงููุฏู
ุชูููุฐ ูุธุงู ุงุฎุชูุงุฑ ุงูุฎุทุฉ (Free / Monthly / Yearly) ุจุดูู ุชุฏุฑูุฌู ุจุฏูู ุชุนููุฏ ุนูุฏ ุงูุชุณุฌููุ ูุน ุชุญููู ุงููุณุชุฎุฏู ูููุฏููุน ููุท ุนูุฏ ูุญุธุฉ ุงูุงุญุชูุงุฌ.

ูุฐุง ุงูููู ููุนุฏ ููุชู ุชุณูููู ูุจุงุดุฑุฉ ูุฃู **AI CLI Tool** ููุชูููุฐ ุฏุงุฎู ูุดุฑูุน:
- Laravel 12
- Livewire 3
- FilamentPHP 4

---

## 1. ููุทุฉ ุงูุจุฏุงูุฉ (Signup Flow)

### ุงูุญุงูุฉ ุงูุงูุชุฑุงุถูุฉ
- ุนูุฏ ุชุณุฌูู ุฃู ูุณุชุฎุฏู ุฌุฏูุฏ:
  - `plan_type = free`
  - `contact_credits = 0`
  - `credits_reset_at = null`

โ ูุง ูุชู ุณุคุงู ุงููุณุชุฎุฏู ุนู ุงูุฎุทุฉ ุฃุซูุงุก ุงูุชุณุฌูู.

---

## 2. ุงูุชุตูุญ ููุณุชุฎุฏู ูุฌุงูู (Free Mode)

### ุงูุตูุงุญูุงุช
ุงููุณุชุฎุฏู ุงููุฌุงูู ูุณุชุทูุน:
- ุชุตูุญ ุงูุฃููุงุฑ (Ideas)
- ุชุตูุญ ุงููุณุชุซูุฑูู (Investors)
- ูุดุงูุฏุฉ ุงูููุฎุตุงุช (summary)
- ุฑุคูุฉ ุญุงูุฉ ุจูุงูุงุช ุงูุชูุงุตู (ููุชูุญุฉ / ูุบููุฉ)

### ุงููููุฏ
- ูุง ููููู ุฑุคูุฉ ุจูุงูุงุช ุงูุชูุงุตู ุงููุบููุฉ.

---

## 3. ูุญุธุฉ ุงูุชุญููู (Conversion Moment)

### ุงูุญุฏุซ
ุนูุฏ ุถุบุท ุงููุณุชุฎุฏู ุนูู ุฒุฑ:
> "ุนุฑุถ ุจูุงูุงุช ุงูุชูุงุตู"

ูุชู ุชูููุฐ ุงูุชุญูู ุงูุชุงูู:

```
if contact_visibility == open:
    show contact details
else:
    redirect to upgrade / payment flow
```

---

## 4. ููุทู ุงููุฑุงุฑ ุญุณุจ ุญุงูุฉ ุงููุณุชุฎุฏู

### 4.1 ุงููุณุชุฎุฏู Free

ูุชู ุนุฑุถ Modal ุฃู ุตูุญุฉ ุชุญุชูู:

#### ุฎูุงุฑ 1: Pay Per Use
- ุฏูุน 9$
- ูุชุญ ุจูุงูุงุช ุงูุชูุงุตู ูุฑุฉ ูุงุญุฏุฉ
- ุชุณุฌูู ุงูุนูููุฉ ูู `contact_unlocks`

#### ุฎูุงุฑ 2: Upgrade Subscription
- ุงูุงุดุชุฑุงู ุงูุดูุฑู ุฃู ุงูุณููู
- ุงูุญุตูู ุนูู ุฑุตูุฏ ูุชุญ ุดูุฑู (10 ูุฑุงุช)

---

### 4.2 ุงููุณุชุฎุฏู Monthly / Yearly

#### ูู ูุฏูู ุฑุตูุฏ ูุชุงุญ
- ูุชู ูุชุญ ุจูุงูุงุช ุงูุชูุงุตู ูุจุงุดุฑุฉ
- ุฅููุงุต `contact_credits` ุจููุฏุงุฑ 1
- ุชุณุฌูู ุงูุนูููุฉ ูู `contact_unlocks`

#### ูู ุงูุฑุตูุฏ = 0
- ุนุฑุถ ุฑุณุงูุฉ:
  > "ููุฏ ุงุณุชูููุช ุฑุตูุฏู ุงูุดูุฑู"
- ุฅุชุงุญุฉ:
  - Pay Per Use
  - ุงูุชุธุงุฑ ุงูุชุฌุฏูุฏ

---

## 5. ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช (Subscription Logic)

### ุนูุฏ ุงูุงุดุชุฑุงู ุงูุดูุฑู
- ุฅูุดุงุก ุณุฌู ูู `subscriptions`
- ุชุญุฏูุซ ุงููุณุชุฎุฏู:
```
plan_type = monthly
contact_credits = 10
credits_reset_at = now()
```

### ุนูุฏ ุงูุงุดุชุฑุงู ุงูุณููู
- ููุณ ููุทู ุงูุดูุฑู
- ูุฏุฉ ุฃุทูู + ุฎุตู

---

## 6. ุงูุชุฌุฏูุฏ ุงูุดูุฑู (Credits Reset)

### Cron Job (ุดูุฑู)
- ุงูุจุญุซ ุนู ุงููุณุชุฎุฏููู ุฐูู ุงูุงุดุชุฑุงู ุงููุดุท
- ุฅุนุงุฏุฉ ุชุนููู:
```
contact_credits = 10
credits_reset_at = now()
```

---

## 7. ุงูุชูุงุก ุงูุงุดุชุฑุงู

### ุนูุฏ ุงูุชูุงุก `ends_at`
- ุชุญุฏูุซ ุงูุงุดุชุฑุงู:
```
status = expired
```
- ุชุญุฏูุซ ุงููุณุชุฎุฏู:
```
plan_type = free
contact_credits = 0
credits_reset_at = null
```

---

## 8. ุชุณุฌูู ุนูููุงุช ุงููุชุญ (Contact Unlocks)

ูุชู ุชุณุฌูู ูู ุนูููุฉ ูุชุญ ุจูุงูุงุช ูู ุฌุฏูู:
- user_id
- unlockable_type (Idea / Investor)
- unlockable_id
- method (credit / pay_per_use)
- created_at

---

## 9. ูุงุฌูุฉ ุงููุณุชุฎุฏู (UI Requirements)

### ุนูุฏ ุนุฑุถ ููุฑุฉ ุฃู ูุณุชุซูุฑ
- ุฅุธูุงุฑ Badge:
  - ๐ ุจูุงูุงุช ููุชูุญุฉ
  - ๐ ุจูุงูุงุช ูุบููุฉ

### ุฒุฑ ุนุฑุถ ุงูุจูุงูุงุช
- ุธุงูุฑ ุฏุงุฆููุง
- ุงูุณููู ูุฎุชูู ุญุณุจ ุญุงูุฉ ุงููุณุชุฎุฏู

---

## 10. ููุงุท ุงูุชูููุฐ ุงูุจุฑูุฌูุฉ

### Services
- UnlockContactService
- SubscriptionService

### Guards / Checks
- ูุจู ุนุฑุถ ุฃู ุจูุงูุงุช ุชูุงุตู

### UI Components
- Upgrade Modal
- Pay Per Use Modal

---

## 11. ููุงุญุธุงุช ุชูููุฐูุฉ

- ูุง ูุชู ุฏูุฌ ุจูุงุจุฉ ุฏูุน ุญููููุฉ ูู ูุฐู ุงููุฑุญูุฉ
- ุงุณุชุฎุฏู Mock Payment
- ุฌููุน ุงูุนูููุงุช ูุงุจูุฉ ููุชูุณุนุฉ ูุงุญููุง

---

## ุงูููุงูุฉ
ูุฐุง ุงูู plan ููุซู Flow ูุงูู ูุงุจู ููุชูููุฐ ูุจุงุดุฑุฉ ุฏุงุฎู ุงููุดุฑูุน ุงูุญุงูู ุจุฏูู ูุณุฑ ุฃู ููุทู ูุงุฆู.

